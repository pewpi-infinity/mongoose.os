<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‚àû Infinity File Explorer - Complete Repository Catalog</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: #0b0b0b;
      color: #e6e6e6;
      font-family: 'Courier New', monospace;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
      padding: 30px;
      background: linear-gradient(135deg, rgba(0, 229, 255, 0.1), rgba(255, 0, 255, 0.1));
      border: 2px solid #00e5ff;
      border-radius: 12px;
    }

    .header h1 {
      font-size: 2.5rem;
      color: #00e5ff;
      margin-bottom: 10px;
    }

    .header .tagline {
      font-size: 1.2rem;
      opacity: 0.8;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: rgba(0, 229, 255, 0.05);
      border: 1px solid #00e5ff;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }

    .stat-card .number {
      font-size: 2rem;
      color: #00e5ff;
      font-weight: bold;
    }

    .stat-card .label {
      opacity: 0.7;
      margin-top: 5px;
    }

    .controls {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .search-box {
      flex: 1;
      min-width: 300px;
      padding: 12px 20px;
      background: rgba(0, 229, 255, 0.05);
      border: 2px solid #00e5ff;
      border-radius: 8px;
      color: #e6e6e6;
      font-size: 1rem;
      font-family: 'Courier New', monospace;
    }

    .filter-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 10px 20px;
      background: rgba(0, 229, 255, 0.1);
      border: 2px solid #00e5ff;
      border-radius: 8px;
      color: #00e5ff;
      cursor: pointer;
      font-family: 'Courier New', monospace;
      transition: all 0.3s;
    }

    .filter-btn:hover {
      background: rgba(0, 229, 255, 0.2);
      transform: translateY(-2px);
    }

    .filter-btn.active {
      background: #00e5ff;
      color: #0b0b0b;
    }

    .category-section {
      margin-bottom: 40px;
    }

    .category-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background: rgba(0, 229, 255, 0.1);
      border: 2px solid #00e5ff;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
      user-select: none;
    }

    .category-header:hover {
      background: rgba(0, 229, 255, 0.15);
    }

    .category-title {
      font-size: 1.5rem;
      color: #00e5ff;
    }

    .category-count {
      font-size: 1.2rem;
      opacity: 0.7;
    }

    .category-content {
      border: 2px solid #00e5ff;
      border-top: none;
      border-radius: 0 0 8px 8px;
      padding: 20px;
      max-height: 500px;
      overflow-y: auto;
    }

    .category-content.collapsed {
      display: none;
    }

    .file-list {
      display: grid;
      gap: 10px;
    }

    .file-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: rgba(255, 255, 255, 0.03);
      border-left: 3px solid #00e5ff;
      border-radius: 4px;
      transition: all 0.3s;
    }

    .file-item:hover {
      background: rgba(0, 229, 255, 0.1);
      transform: translateX(5px);
    }

    .file-name {
      font-weight: bold;
      color: #00e5ff;
    }

    .file-path {
      opacity: 0.6;
      font-size: 0.9rem;
      margin-top: 3px;
    }

    .file-size {
      opacity: 0.5;
      font-size: 0.9rem;
    }

    .loading {
      text-align: center;
      padding: 60px;
      font-size: 1.5rem;
      color: #00e5ff;
    }

    .harmony-notice {
      background: rgba(255, 0, 255, 0.1);
      border: 2px solid #ff00ff;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
      text-align: center;
    }

    .harmony-notice h2 {
      color: #ff00ff;
      margin-bottom: 10px;
    }

    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(0, 229, 255, 0.05);
    }

    ::-webkit-scrollbar-thumb {
      background: #00e5ff;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>‚àû INFINITY FILE EXPLORER</h1>
    <div class="tagline">Complete Repository Catalog - All Files Incorporated</div>
  </div>

  <div class="harmony-notice">
    <h2>üéµ Harmony Principle Active</h2>
    <p>No files culled. All duplicates harmonized into complementary octave variations.</p>
    <p>Every file serves a purpose. Every machine contributes to the whole.</p>
  </div>

  <div class="stats-grid" id="statsGrid">
    <div class="stat-card">
      <div class="number" id="totalFiles">-</div>
      <div class="label">Total Files</div>
    </div>
    <div class="stat-card">
      <div class="number" id="tokenFiles">-</div>
      <div class="label">Token Files</div>
    </div>
    <div class="stat-card">
      <div class="number" id="indexFiles">-</div>
      <div class="label">Index Files</div>
    </div>
    <div class="stat-card">
      <div class="number" id="textFiles">-</div>
      <div class="label">Text Files</div>
    </div>
    <div class="stat-card">
      <div class="number" id="machines">-</div>
      <div class="label">Machines</div>
    </div>
  </div>

  <div class="controls">
    <input type="text" class="search-box" id="searchBox" placeholder="üîç Search files by name or path...">
    <div class="filter-buttons">
      <button class="filter-btn active" data-filter="all">All Files</button>
      <button class="filter-btn" data-filter="tokens">Tokens</button>
      <button class="filter-btn" data-filter="indexes">Indexes</button>
      <button class="filter-btn" data-filter="texts">Texts</button>
      <button class="filter-btn" data-filter="scripts">Scripts</button>
      <button class="filter-btn" data-filter="html">HTML</button>
      <button class="filter-btn" data-filter="machines">Machines</button>
    </div>
  </div>

  <div id="content">
    <div class="loading">Loading catalog data...</div>
  </div>

  <script>
    let catalog = null;
    let currentFilter = 'all';
    let searchQuery = '';

    // Load catalog data
    async function loadCatalog() {
      try {
        const response = await fetch('INFINITY_FILE_CATALOG.json');
        catalog = await response.json();
        updateStats();
        renderContent();
      } catch (error) {
        document.getElementById('content').innerHTML = `
          <div class="loading" style="color: #ff4444;">
            ‚ö†Ô∏è Error loading catalog. Run cart_INFINITY_FILE_SCANNER.py first.
          </div>
        `;
      }
    }

    function updateStats() {
      document.getElementById('totalFiles').textContent = catalog.total_files.toLocaleString();
      document.getElementById('tokenFiles').textContent = catalog.by_category.tokens.length.toLocaleString();
      document.getElementById('indexFiles').textContent = catalog.by_category.indexes.length.toLocaleString();
      document.getElementById('textFiles').textContent = catalog.by_category.texts.length.toLocaleString();
      document.getElementById('machines').textContent = catalog.machines.length.toLocaleString();
    }

    function renderContent() {
      const content = document.getElementById('content');
      content.innerHTML = '';

      let categories;
      
      if (currentFilter === 'all') {
        categories = Object.entries(catalog.by_category);
      } else if (currentFilter === 'machines') {
        categories = [['machines', catalog.machines]];
      } else {
        categories = [[currentFilter, catalog.by_category[currentFilter]]];
      }

      categories.forEach(([category, files]) => {
        if (!files || files.length === 0) return;

        // Filter by search
        let filteredFiles = files;
        if (searchQuery) {
          filteredFiles = files.filter(file => {
            const searchTarget = (file.path || file.name || '').toLowerCase();
            return searchTarget.includes(searchQuery.toLowerCase());
          });
        }

        if (filteredFiles.length === 0) return;

        const section = document.createElement('div');
        section.className = 'category-section';
        
        const header = document.createElement('div');
        header.className = 'category-header';
        header.innerHTML = `
          <div class="category-title">${category.toUpperCase()}</div>
          <div class="category-count">${filteredFiles.length.toLocaleString()} files</div>
        `;
        
        const contentDiv = document.createElement('div');
        contentDiv.className = 'category-content';
        
        const fileList = document.createElement('div');
        fileList.className = 'file-list';
        
        // Show first 100 files (for performance)
        filteredFiles.slice(0, 100).forEach(file => {
          const item = document.createElement('div');
          item.className = 'file-item';
          item.innerHTML = `
            <div>
              <div class="file-name">${file.name || file.path}</div>
              <div class="file-path">${file.path}</div>
            </div>
            <div class="file-size">${formatSize(file.size)}</div>
          `;
          fileList.appendChild(item);
        });

        if (filteredFiles.length > 100) {
          const more = document.createElement('div');
          more.style.textAlign = 'center';
          more.style.padding = '20px';
          more.style.opacity = '0.6';
          more.textContent = `... and ${(filteredFiles.length - 100).toLocaleString()} more files`;
          fileList.appendChild(more);
        }
        
        contentDiv.appendChild(fileList);
        section.appendChild(header);
        section.appendChild(contentDiv);
        content.appendChild(section);

        // Toggle collapse
        header.addEventListener('click', () => {
          contentDiv.classList.toggle('collapsed');
        });
      });
    }

    function formatSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }

    // Event listeners
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter;
        renderContent();
      });
    });

    document.getElementById('searchBox').addEventListener('input', (e) => {
      searchQuery = e.target.value;
      renderContent();
    });

    // Load on page load
    loadCatalog();
  </script>
</body>
</html>
